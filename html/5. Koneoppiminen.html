<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>5. Koneoppiminen</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><p>Johdanto Datatieteeseen 2020</p>
<h1 id="harjoitustyö-koneoppiminen">Harjoitustyö: Koneoppiminen</h1>
<p><strong>Tuomas Mäkäräinen, 274351</strong></p>
<h2 id="sarakkeiden-merkittävyydet">Sarakkeiden merkittävyydet</h2>
<p>Aloitin tutkiskelemaan asuntojen hintaan vaikuttavia tekijöitä hieman eri tavoin.<br>
Aluksi tein perinteisen korrelaatioita kuvaavan heatmapin:<br>
<img src="https://raw.githubusercontent.com/tuomak-uni/joda/190bf34a7fbac37818d82c8cf63b4528d5328d37/kuvat/corr_heatmap.png" alt="# corr_heatmap"><br>
Nähdään että valmistumisvuosi, ja koko tosiaan korreloivat vahviten hinnan kanssa. M2-hinnan korrelaatio hinnan ja valmistumisvuoden kanssa jätetään huomioimatta, sillä se on johdettu kyseisistä sarakkeista.</p>
<p>Tämän jälkeen kokeillaan sklearnin tarjoamaa  luokittelua hyödyntävää SelectKBest -functiota chi2-pisteytyksellä:<br>
<img src="https://raw.githubusercontent.com/tuomak-uni/joda/190bf34a7fbac37818d82c8cf63b4528d5328d37/kuvat/chi2_bar.png" alt="# chi2_bar"><br>
Huomataan asunnon sijainnin saavan huomattavasti suurimmat pisteet<br>
Tehdään toinen testi sklearnin ExtraTreesClassifier-funktiolla:<br>
<img src="https://raw.githubusercontent.com/tuomak-uni/joda/190bf34a7fbac37818d82c8cf63b4528d5328d37/kuvat/etc_bar.png" alt="# ETC_bar"><br>
Tässäkin testissä alue korostuu huomattavasti.<br>
Valitsin malleissa käytettäviksi sarakkeiksi alueen, koon, vuoden, saunan, ja parvekkeen.<br>
<br></p>
<h3 id="mallit">Mallit</h3>
<p>Päätin kokeilla muodostaa luokittelu- ja regressiomalleista yhden toiminnallisuuskokonaisuuden. Ensin syötetään luokittelumallille asunnosta seuraavat tiedot: asunnon koko, valmistumisvuosi, onko saunaa, tai parveketta. Luokittelija arvio näiden tietojen perusteella, millä alueella Tamperetta voisi löytyä halutunlainen asunto. Ohjelma lisää tämän tiedon aiempiin, ja lähtee seuraavaksi arvioimaan vastaavanlaisen asunnon hintaa regressiomallilla.</p>
<h4 id="luokittelumalli">Luokittelumalli</h4>
<p>Seuraavana vuorossa oli mahdollista aluetta arvioiva malli. Lähdin ensin sklearnin tarjonnasta, ja valitsin RandomForestClassifier-mallin. Tarkkuuden puolesta mallin tulos ei ollut erityisen vahva:<br>
<img src="https://raw.githubusercontent.com/tuomak-uni/joda/f59f20fa1e8191ee677f7d59835617699d3ccd16/kuvat/rfc_clf_result.png" alt="# rfc_clf_result"><br>
Verrokkina kokeilin XGBoost-kirjaston XGBClassifier-mallia:<br>
<img src="https://raw.githubusercontent.com/tuomak-uni/joda/f59f20fa1e8191ee677f7d59835617699d3ccd16/kuvat/xgb_clf_result.png" alt="# xgb_clf_result"><br>
XGBoostikaan ei kovin paljoa paremmaksi pistänyt tarkkuuden suhteen.</p>
<h4 id="regressiomalli">Regressiomalli</h4>
<p>Seuraavaksi lähdin toteuttamaan hintaa arvioivaa mallia. Ensimmäisenä kokeilin sklearnin perus LinearRegression -mallia. Tämän mallin tuottama  RMSE oli korkea ja R<sup>2</sup>-arvo suhteellisen matala:</p>
<p><img src="https://raw.githubusercontent.com/tuomak-uni/joda/f59f20fa1e8191ee677f7d59835617699d3ccd16/kuvat/l_regr_result.png" alt="# l_regr_result"></p>
<p>Päätin siis harjoitusmielessä testata toista mallia. Päädyin Kagglessa paljon käytössäolevaan XGBoost-kirjaston XGBRegressor-malliin. Tällä saavutin huomattavasti paremman tuloksen:</p>
<p><img src="https://raw.githubusercontent.com/tuomak-uni/joda/f59f20fa1e8191ee677f7d59835617699d3ccd16/kuvat/xgb_regr_result.png" alt="# xgb_regr_result"></p>
<p>Mallien testaamisesta lisää seuraavassa jaksossa.</p>
<p><b>Koodit GitHubissa:<b> <a href="https://github.com/tuomak-uni/joda">https://github.com/tuomak-uni/joda</a>  .</b></b></p>
<h3 id="hyödylliset-lähteet">Hyödylliset lähteet</h3>
<p>sklearn linear model doc: <a href="https://scikit-learn.org/stable/modules/classes.html#module-sklearn.linear_model">https://scikit-learn.org/stable/modules/classes.html#module-sklearn.linear_model</a><br>
XGBoost doc: <a href="https://xgboost.readthedocs.io/en/latest/">https://xgboost.readthedocs.io/en/latest/</a><br>
Piirteiden erottelu:</p>
<ul>
<li><a href="https://scikit-learn.org/stable/modules/feature_selection.html">https://scikit-learn.org/stable/modules/feature_selection.html</a></li>
<li><a href="https://towardsdatascience.com/feature-selection-techniques-in-machine-learning-with-python-f24e7da3f36e">https://towardsdatascience.com/feature-selection-techniques-in-machine-learning-with-python-f24e7da3f36e</a></li>
<li><a href="https://www.kaggle.com/darkside92/detailed-examination-for-house-price-top-10">https://www.kaggle.com/darkside92/detailed-examination-for-house-price-top-10</a></li>
</ul>
<h3 id="helpot-ja-haastavat-asiat">Helpot ja haastavat asiat</h3>
<ul>
<li>Malleihin syötettävän datan muoto tuotti hieman päänvaivaa, mutta homma selvisi pienen googlailun avulla.</li>
</ul>
</div>
</body>

</html>
